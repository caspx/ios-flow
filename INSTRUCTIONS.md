# iOS Flow

A GitHub template repository for building iOS apps with [Claude Code](https://claude.ai/claude-code). Provides a structured workflow from product planning through TestFlight release, powered by XcodeGen and XcodeBuildMCP.

## What's Included

- **`CLAUDE.md`** — coding standards, architecture rules, and workflow instructions
- **`project.yml`** — XcodeGen project definition (generates `.xcodeproj`)
- **`.mcp.json`** — XcodeBuildMCP integration for building, testing, and running from Claude
- **`setup.sh`** — one-command bootstrap that configures everything

### Commands

| Command | What it does |
|---------|-------------|
| `/build` | Build for iOS simulator |
| `/run` | Build, boot simulator, install, launch, and take a screenshot |
| `/create-prd` | Create a Product Requirements Document interactively |
| `/plan-feature <name>` | Generate a spec and ordered task list for a feature |
| `/implement-feature <name>` | Implement the next uncompleted task from a feature's task list |
| `/design-view` | Screenshot-driven UI implementation — paste a mockup or describe a view |
| `/release-testflight <version>` | Bump version, generate changelog, release via Fastlane |

### Agents

| Agent | Purpose |
|-------|---------|
| `ios-architect` | Architecture decisions and system design review (Opus) |
| `swift-reviewer` | Code quality and Swift 6 concurrency review (Sonnet) |

## Prerequisites

- **Xcode 16+** with iOS 17+ SDK
- **XcodeGen** — `brew install xcodegen`
- **Node.js** (for XcodeBuildMCP) — `brew install node`
- **Claude Code** — `npm install -g @anthropic-ai/claude-code`
- **Fastlane** (optional, for releases) — `brew install fastlane`

## Quick Start

### 1. Create a new repo from the template

```bash
gh repo create my-app --template <your-username>/ios-flow --clone
cd my-app
```

Or click **"Use this template"** on GitHub, then clone.

### 2. Run setup

```bash
chmod +x setup.sh
./setup.sh
```

This will:
- Ask for your app name and organization identifier
- Replace all template placeholders
- Create source files (`App.swift`, `ContentView.swift`, tests)
- Generate the Xcode project via XcodeGen
- Initialize a git repo with an initial commit

### 3. Start building with Claude

```bash
claude
```

Then follow the workflow:

```text
/create-prd              — define your product
/plan-feature auth       — plan a feature
/implement-feature auth  — implement it task by task
/design-view             — paste a mockup for UI work
/run                     — see it on the simulator
```

## Workflow Overview

```text
/create-prd → /plan-feature → /implement-feature → /design-view → /run
     ↑                                                              |
     └──────────── iterate until ready for release ─────────────────┘
                                   ↓
                        /release-testflight 1.0.0
```

1. **Plan** — Start with a PRD, then break features into specs and tasks
2. **Implement** — Work through tasks one at a time; each is built and tested
3. **Design** — Refine UI with a screenshot feedback loop (build → screenshot → compare → iterate)
4. **Release** — Bump version, generate changelog, ship to TestFlight

## Tech Stack

| | |
|-|-|
| **Platform** | iOS 17+ |
| **Language** | Swift 6.0 (strict concurrency) |
| **UI** | SwiftUI |
| **Architecture** | MVVM with `@Observable` |
| **Dependencies** | Swift Package Manager |
| **Project generation** | XcodeGen |
| **Build tooling** | XcodeBuildMCP |

## Project Structure (after setup)

```text
├── CLAUDE.md                  # Claude Code instructions
├── project.yml                # XcodeGen project definition
├── .mcp.json                  # XcodeBuildMCP config
├── .claude/
│   ├── settings.json          # Team permissions
│   ├── commands/              # 7 slash commands
│   └── agents/                # 2 specialized agents
├── Sources/
│   └── <AppName>/
│       ├── <AppName>App.swift
│       └── ContentView.swift
├── Tests/
│   └── <AppName>Tests/
├── Resources/
└── docs/
    ├── PRD.md
    ├── specs/
    └── tasks/
```

## Notes

- The `.xcodeproj` is generated by XcodeGen and **not committed to git**. Edit `project.yml` instead, then run `xcodegen generate`.
- All Claude commands use XcodeBuildMCP tools for builds — no raw `xcodebuild` commands needed.
- The `/plan-feature` command uses Opus for deep reasoning and produces specs + tasks without writing code.
- The `/design-view` command runs up to 3 build-screenshot-compare iterations before asking for feedback.
